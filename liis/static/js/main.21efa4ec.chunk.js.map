{"version":3,"sources":["images/ny1.jpg","images/ny2.jpg","images/ny3.jpg","store/auth/constants.js","components/AuthPage/AuthPage.jsx","store/auth/action.js","components/FlightsLogout/FlightsLogout.jsx","store/flights/constants.js","store/flights/action.js","components/FlightsHeader/FlightsHeader.jsx","components/FlightsCarousel/FlightsCarousel.jsx","components/FlightsInfo/FlightsInfo.jsx","components/FlightsCard/FlightsCard.jsx","components/FlightsPage/FlightsPage.jsx","App.js","utils/history.js","store/auth/authSaga.js","store/flights/flightsSaga.js","store/rootSaga.js","utils/createReducer.js","store/auth/reducer.js","store/flights/reducer.js","store/rootReducer.js","store/store.js","index.js"],"names":["IS_FORM_VALID","LOG_OUT","AuthPage","useState","email","setEmail","password","setPassword","emailError","setEmailError","passwordError","setPasswordError","isFormValid","setIsFormValid","dispatch","useDispatch","useEffect","className","htmlFor","type","name","id","onChange","e","target","value","test","String","classList","remove","parentNode","add","emailHandler","toLowerCase","length","passwordHandler","disabled","onClick","preventDefault","FlightsLogout","FETCH_FLIGHTS","FETCH_FLIGHTS_SUCCESS","GET_CAROUSEL_IMAGES","SET_FAVORITES_COUNT","fetchFlights","currentDay","today","Date","toISOString","substring","FlightsHeader","localeDate","min","carouselSettings","infinite","slidesToShow","speed","arrows","FlightsCarousel","carouselImages","useSelector","state","flights","images","slider","React","useRef","ref","map","item","src","default","alt","current","slickPrev","slickNext","FlightsInfo","flightsData","favoritesCount","filter","flight","isFavorite","favoritesClickHandle","setFavorites","price","from","to","date","airport","currency","dateOptions","year","month","day","FlightsCard","setCurrentDay","setLocaleDate","localeCurrentDay","toLocaleDateString","FlightsPage","localStorage","removeItem","PrivateRoute","Component","component","rest","auth","props","PublicRoute","restricted","App","path","exact","createBrowserHistory","login","setItem","history","push","console","log","authSagas","takeEvery","fetchFlightsSaga","fillArray","count","result","i","action","getFlights","axios","method","url","params","inboundpartialdate","headers","call","response","data","newData","Quotes","MinPrice","Currencies","Symbol","Places","CityName","IataCode","Carriers","Name","listFlights","nanoid","put","flightsSagas","rootSaga","all","createReducer","strategyMap","initialState","undefined","Boolean","getItem","authReducer","ny1","require","ny2","ny3","flightsReducer","rootReducer","combineReducers","sagaMiddleware","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","run","ReactDOM","render","basename","process","document","getElementById"],"mappings":"8FAAA,OAAe,cAA0B,iC,iCCAzC,OAAe,cAA0B,iC,iCCAzC,OAAe,cAA0B,iC,4HCA5BA,EAAgB,gBAChBC,EAAU,U,eCKVC,EAAW,WAEtB,MAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KACA,EAAoCJ,mBAAS,IAA7C,mBAAOK,EAAP,KAAmBC,EAAnB,KACA,EAA0CN,mBAAS,IAAnD,mBAAOO,EAAP,KAAsBC,EAAtB,KACA,EAAsCR,oBAAS,GAA/C,mBAAOS,EAAP,KAAoBC,EAApB,KAEMC,EAAWC,cAEjBC,qBAAW,WACuBH,GAA/BL,IAAcE,KAEd,CAACF,EAAYE,IAsChB,OACE,qBAAKO,UAAU,YAAf,SACE,sBAAKA,UAAU,OAAf,UACE,qBAAKA,UAAU,gBAAf,iCACA,uBAAMA,UAAU,aAAhB,UACE,sBAAKA,UAAU,kBAAf,UACE,uBAAOA,UAAU,mBAAmBC,QAAQ,cAA5C,6CAEA,uBAAOD,UAAU,mBAAmBE,KAAK,QAAQC,KAAK,QAAQC,GAAG,cAAcC,SAAU,SAACC,GAAD,OA5C9E,SAACA,GACpBlB,EAASkB,EAAEC,OAAOC,OACP,wIACHC,KAAKC,OAAOJ,EAAEC,OAAOC,SAK3BhB,EAAc,IACdc,EAAEC,OAAOI,UAAUC,OAAO,oBAC1BN,EAAEC,OAAOM,WAAWF,UAAUC,OAAO,sBANrCN,EAAEC,OAAOI,UAAUG,IAAI,oBACvBR,EAAEC,OAAOM,WAAWF,UAAUG,IAAI,oBAClCtB,EAAc,sLAsCwFuB,CAAaT,IAAIE,MAAOrB,IAEtHI,GAAc,qBAAKS,UAAU,0DAAf,SAA0ET,OAI5F,sBAAKS,UAAU,kBAAf,UACE,uBAAOA,UAAU,mBAAmBC,QAAQ,iBAA5C,mDAEA,uBAAOD,UAAU,mBAAmBE,KAAK,WAAWC,KAAK,WAAWC,GAAG,iBAAiBC,SAAU,SAACC,GAAD,OAvCpF,SAACA,GACvBhB,EAAYgB,EAAEC,OAAOC,QACV,0CACHC,KAAKC,OAAOJ,EAAEC,OAAOC,OAAOQ,gBAAkBV,EAAEC,OAAOC,MAAMS,OAAS,GAC5EvB,EAAiB,sRACjBY,EAAEC,OAAOI,UAAUG,IAAI,oBACvBR,EAAEC,OAAOM,WAAWF,UAAUG,IAAI,sBAElCpB,EAAiB,IACjBY,EAAEC,OAAOI,UAAUC,OAAO,oBAC1BN,EAAEC,OAAOM,WAAWF,UAAUC,OAAO,qBA6B0EM,CAAgBZ,IAAIE,MAAOnB,IAElII,GAAiB,qBAAKO,UAAU,6DAAf,SAA6EP,OAGlG,wBAAQO,UAAU,oBAAoBE,KAAK,SAASiB,UAAWxB,EAAayB,QA9BrE,SAACd,GACdA,EAAEe,iBAEE1B,GACFE,ECnDoC,CACxCK,KAAMnB,KD4EE,qDE3EGuC,G,YAAgB,SAAC,GAAiB,IAAfF,EAAc,EAAdA,QAE9B,OACE,sBAAKpB,UAAU,kBAAkBoB,QAASA,EAA1C,UACE,iEACA,qBAAKpB,UAAU,8BCTRuB,EAAgB,gBAChBC,EAAwB,wBACxBC,EAAsB,sBACtBC,EAAsB,sBCGtBC,EAAe,SAACC,GAAD,MAAiB,CAC3C1B,KAAMqB,EACNK,eCJIC,G,OAAQ,IAAIC,MAAOC,cAAcC,UAAU,EAAG,KAEvCC,EAAgB,SAAC,GAA0C,IAAxCC,EAAuC,EAAvCA,WAAYN,EAA2B,EAA3BA,WAAYvB,EAAe,EAAfA,SACtD,OAAO,sBAAKL,UAAU,uBAAf,UAEL,sBAAKA,UAAU,wBAAf,UACE,sBAAMA,UAAU,6BAAhB,kDACA,qBAAKA,UAAU,gCACf,sBAAMA,UAAU,4BAAhB,0BAGF,sBAAKA,UAAU,qBAAf,UACE,+BAAOkC,IACP,qBAAKlC,UAAU,sBAEf,sBAAMA,UAAU,gBAAhB,SACE,uBAAOE,KAAK,OAAOC,KAAK,WAAWK,MAAOoB,EAAYO,IAAKN,EAAOxB,SAAU,SAACC,GAAD,OAAOD,EAASC,e,iBCX9F8B,G,kBAAmB,CACvBpC,UAAW,SACXqC,UAAU,EACVC,aAAc,IACdC,MAAO,IACPC,QAAQ,IAGGC,EAAkB,WAE7B,IAAMC,EAAiBC,aAAY,SAAAC,GAAK,OAAIA,EAAMC,QAAQC,UAEpDC,EAASC,IAAMC,OAAO,MAE5B,OACE,sBAAKjD,UAAU,gBAAf,UACE,cAAC,IAAD,yBAAQkD,IAAKH,GAAYX,GAAzB,aACGM,EAAeS,KAAI,SAAAC,GAAI,OAAI,qBAAKC,IAAKD,EAAKE,QAASC,IAAI,cAE1D,wBAAQvD,UAAU,2BAA2BoB,QAAS,+BAAM2B,QAAN,IAAMA,GAAN,UAAMA,EAAQS,eAAd,aAAM,EAAiBC,eAC7E,wBAAQzD,UAAU,2BAA2BoB,QAAS,+BAAM2B,QAAN,IAAMA,GAAN,UAAMA,EAAQS,eAAd,aAAM,EAAiBE,mBCtBtEC,G,MAAc,WAAO,IAAD,EAEzB9D,EAAWC,cAEX8D,EAAcjB,aAAY,SAAAC,GAAK,OAAIA,EAAMC,QAAQe,eAEjDC,EAAiBD,EAAYE,QAAO,SAACC,GAAD,OAAYA,EAAOC,cAAY/C,OAEnEgD,EAAuB,SAAC7D,GAC5BP,EHDwB,SAACO,GAAD,MAAS,CACnCF,KAAMwB,EACNtB,MGDW8D,CAAa9D,KAGxB,OACE,sBAAKJ,UAAU,gBAAf,UAEE,sBAAKA,UAAU,0BAAf,mIAAgE,sBAAMA,UAAU,gCAAhB,SAAiD6D,IAAjH,2CAEA,qBAAK7D,UAAU,sBAAf,UAEG,UAAA4D,EAAY,UAAZ,eAAgBO,OAAQP,EAAYT,KAAI,SAACY,GACxC,OACI,sBAAK/D,UAAU,qBAAf,UACE,qBAAKA,UAAU,6BAEf,sBAAKA,UAAU,0BAAf,UAEE,sBAAKA,UAAU,iCAAf,UACE,+BAAO+D,EAAOK,OACd,qBAAKpE,UAAU,mCACf,+BAAO+D,EAAOM,QAGhB,sBAAKrE,UAAU,0BAAf,UACE,8BAAM+D,EAAOO,OACb,qBAAKtE,UAAU,iCACf,2CAEF,8BAAM+D,EAAOQ,aAGf,sBAAKvE,UAAU,2BAAf,UACE,qBAAKA,UAAS,yCAAoC+D,EAAOC,WAAa,wCAA0C,0CAA6C5C,QAAS,kBAAM6C,EAAqBF,EAAO3D,OACxM,gCACE,sBAAMJ,UAAU,gCAAhB,qBACA,sBAAMA,UAAU,kCAAhB,mBAAsD+D,EAAOI,MAA7D,YAAsEJ,EAAOS,wBAKrF,qBAAKxE,UAAU,sBAAf,sSC7CNyE,G,MAAc,CAAEC,KAAM,UAAWC,MAAO,OAAQC,IAAK,YAE9CC,EAAc,WAEzB,MAAoC3F,oBAAS,IAAI4C,MAAOC,cAAcC,UAAU,EAAG,KAAnF,mBAAOJ,EAAP,KAAmBkD,EAAnB,KACA,EAAoC5F,mBAAS,IAA7C,mBAAOgD,EAAP,KAAmB6C,EAAnB,KAEMlF,EAAWC,cAEjBC,qBAAU,WAER,IAAMiF,EAAmB,IAAIlD,KAAKF,GAAYqD,mBAAmB,QAASR,GAE1EM,EAAcC,EAAiBhD,UAAU,EAAGgD,EAAiB/D,OAAS,IAEtEpB,EAAS8B,EAAaC,MACrB,IAYH,OACE,sBAAK5B,UAAU,gBAAf,UAEE,cAAC,EAAD,CACEkC,WAAYA,EACZN,WAAYA,EACZvB,SAhBmB,SAACC,GACxBwE,EAAcxE,EAAEC,OAAOC,OAEvB,IAAMwE,EAAmB,IAAIlD,KAAKxB,EAAEC,OAAOC,OAAOyE,mBAAmB,QAASR,GAE9EM,EAAcC,EAAiBhD,UAAU,EAAGgD,EAAiB/D,OAAS,IAEtEpB,EAAS8B,EAAarB,EAAEC,OAAOC,WAW7B,cAAC,EAAD,IAEA,cAAC,EAAD,QCvCO0E,EAAc,WAEzB,IAAMrF,EAAWC,cAIjB,OACE,sBAAKE,UAAU,qBAAf,UAEE,cAAC,EAAD,CAAeoB,QALJ,kBAAMvB,GRPrBsF,aAAaC,WAAW,qBAChB,CACNlF,KAAMlB,QQYJ,cAAC,EAAD,Q,qDCZOqG,EAAe,SAAC,GAAuC,IAA1BC,EAAyB,EAApCC,UAAyBC,EAAW,iBAC3D7F,EAAcgD,aAAY,SAAAC,GAAK,OAAIA,EAAM6C,KAAK9F,eAEpD,OACE,cAAC,IAAD,2BACM6F,GADN,IAEED,UAAW,SAACG,GAAD,OACT/F,EACE,cAAC2F,EAAD,eAAeI,IAEf,cAAC,IAAD,CAAUrB,GAAG,WAOjBsB,EAAc,SAAC,GAAmD,IAAtCL,EAAqC,EAAhDC,UAAqCC,GAAW,EAA1BI,WAA0B,kBAC/DjG,EAAcgD,aAAY,SAAAC,GAAK,OAAIA,EAAM6C,KAAK9F,eAEpD,OACE,cAAC,IAAD,2BACM6F,GADN,IAEED,UAAW,SAACG,GAAD,OACT/F,EACE,cAAC,IAAD,CAAU0E,GAAG,YAEb,cAACiB,EAAD,eAAeI,SAiBVG,EAVH,WAEV,OACE,eAAC,IAAD,WACE,cAAC,EAAD,CAAcC,KAAK,WAAWP,UAAWL,IACzC,cAAC,EAAD,CAAaa,OAAK,EAACD,KAAK,IAAIP,UAAWtG,Q,iEC9C9B+G,cAAqB,I,WCE1BC,GAAV,SAAUA,IAAV,iEAEI,OAFJ,kBAEUd,aAAae,QAAQ,qBAAqB,GAFpD,OAII,OAJJ,SAIUC,EAAQC,KAAK,YAJvB,uDAMKC,QAAQC,IAAR,MANL,qDAUO,IAAMC,EAAY,CACvBC,YAAUzH,EAAekH,I,oCCIjBQ,IAVJC,EAAY,SAAClG,EAAOmG,GAGxB,IAFA,IAAMC,EAAS,GAENC,EAAI,EAAGA,EAAIF,EAAOE,IACzBD,EAAOR,KAAK5F,GAGd,OAAOoG,GAGT,SAAUH,GAAiBK,GAA3B,6FAcqB,OAbbC,EAAa,WAClB,OAAOC,IAAM,CACVC,OAAQ,MACRC,IAAI,4HAAD,OAA8HJ,EAAOlF,YACxIuF,OAAQ,CAACC,mBAAoB,WAC7BC,QAAS,CACP,iBAAkB,qDAClB,kBAAmB,4DAR3B,kBAc2BC,YAAKP,GAdhC,OAkCI,OApBMQ,EAdV,OAeUC,EAAOD,EAASC,KAEhBC,EAAU,CACdtD,MAAK,UAAEqD,EAAKE,OAAO,UAAd,aAAE,EAAgBC,SACvBnD,SAAQ,UAAEgD,EAAKI,WAAW,UAAlB,aAAE,EAAoBC,OAC9BzD,KAAK,GAAD,iBAAKoD,EAAKM,OAAO,UAAjB,aAAK,EAAgBC,SAArB,uBAAkCP,EAAKM,OAAO,UAA9C,aAAkC,EAAgBE,SAAlD,KACJ3D,GAAG,GAAD,iBAAKmD,EAAKM,OAAO,UAAjB,aAAK,EAAgBC,SAArB,uBAAkCP,EAAKM,OAAO,UAA9C,aAAkC,EAAgBE,SAAlD,KACF1D,KAAMwC,EAAOlF,WACb2C,QAAO,UAAEiD,EAAKS,SAAS,UAAhB,aAAE,EAAkBC,MAGvBC,EAAczB,EAAUe,EAAS,IAAItE,KAAI,SAAAN,GAC7C,OAAO,2BACFA,GADL,IAEEmB,YAAY,EACZ5D,GAAIgI,mBA9BZ,UAkCUC,YAAI,CAAEnI,KAAMsB,EAAuB2G,gBAlC7C,0DAoCI9B,QAAQC,IAAR,MApCJ,sDAwCO,IAAMgC,GAAe,CAC1B9B,YAAUjF,EAAekF,K,YCxDF8B,IAAV,SAAUA,KAAV,iEACb,OADa,SACPC,YAAI,GAAD,mBACJjC,GADI,YAEJ+B,MAHQ,wC,aCIAG,I,MAAAA,GANf,SAAuBC,EAAaC,GAClC,OAAO,eAAC/F,EAAD,uDAAS+F,EAAc7B,EAAvB,mDAAgE8B,IAA7BF,EAAY5B,EAAO5G,MACzDwI,EAAY5B,EAAO5G,MAAM0C,EAAOkE,GAChBlE,ICChB+F,GAAe,CACnBhJ,YAAakJ,QAAQ1D,aAAa2D,QAAQ,wBAAyB,GAoBtDC,GAFKN,IALH,sBACd1J,GAXyB,SAAC6D,GAAD,mBAAC,eACxBA,GADuB,IAE1BjD,aAAa,OAQE,gBAEdX,GAPY,SAAC4D,GAAD,mBAAC,eACXA,GADU,IAEbjD,aAAa,OAGE,IAK8BgJ,IClBzCK,GAAMC,EAAQ,KACdC,GAAMD,EAAQ,KACdE,GAAMF,EAAQ,KAEdN,GAAe,CACnB/E,YAAa,GACbd,OAAQ,CAACkG,GAAKE,GAAKC,GAAKH,GAAKE,GAAKC,KAoCrBC,GAFQX,IANN,sBACdjH,GAzBkB,SAACoB,EAAOC,GAC3B,OAAO,YAAC,eACLD,GADH,IAEAgB,YAAaf,EAAQsF,iBAqBN,gBAEd1G,GApBuB,SAACmB,GAAD,mBAAC,eACtBA,GADqB,IAExBE,OAAQF,EAAME,YAgBC,gBAGdpB,GAhBkB,SAACkB,EAAD,OAAUxC,EAAV,EAAUA,GAAV,mBAAC,eACjBwC,GADgB,IAEnBgB,YAAahB,EAAMgB,YAAYT,KAAI,SAAAY,GACjC,OAAGA,EAAO3D,KAAOA,EACR,2BACF2D,GADL,IAEEC,YAAYD,EAAOC,aAGhB,eAAKD,WAIC,IAMiC4E,ICtCnCU,GALKC,0BAAgB,CAClC7D,KAAMsD,GACNlG,QAASuG,KCALG,GAAiBC,cASjBC,GALG,eACAC,sBAAYL,GAAaM,8BAAoBC,0BAAgBL,OAMtEA,GAAeM,IAAItB,IAEJkB,UCVfK,IAASC,OACP,cAAC,IAAD,CAAQ5D,QAAUA,EAAU6D,SAAUC,GAAtC,SACE,cAAC,IAAD,CAAUR,MAAQA,GAAlB,SACE,cAAC,EAAD,QAGJS,SAASC,eAAe,U","file":"static/js/main.21efa4ec.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/ny1.43b4b93f.jpg\";","export default __webpack_public_path__ + \"static/media/ny2.fef67527.jpg\";","export default __webpack_public_path__ + \"static/media/ny3.6bd6b6ab.jpg\";","export const IS_FORM_VALID = 'IS_FORM_VALID';\r\nexport const LOG_OUT = 'LOG_OUT';","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { setFormVerification } from '../../store/auth/action';\r\n\r\nimport './AuthPage.css';\r\n\r\nexport const AuthPage = () => {\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [emailError, setEmailError] = useState('');\r\n  const [passwordError, setPasswordError] = useState('');\r\n  const [isFormValid, setIsFormValid] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect( () => {\r\n    (emailError || passwordError) ? setIsFormValid(false) : setIsFormValid(true);\r\n\r\n  }, [emailError, passwordError]);\r\n\r\n  const emailHandler = (e) => {\r\n    setEmail(e.target.value);\r\n    const re = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\r\n    if (!re.test(String(e.target.value))) {\r\n      e.target.classList.add('auth__form-error');\r\n      e.target.parentNode.classList.add('auth__form-error');\r\n      setEmailError('Неверный адрес электронной почты');\r\n    } else {\r\n      setEmailError('');\r\n      e.target.classList.remove('auth__form-error');\r\n      e.target.parentNode.classList.remove('auth__form-error');\r\n    }\r\n  }\r\n\r\n  const passwordHandler = (e) => {\r\n    setPassword(e.target.value);\r\n    const re = /^[^а-яё]+$/iu;\r\n    if (!re.test(String(e.target.value).toLowerCase()) || e.target.value.length < 8) {\r\n      setPasswordError('В пароле должно быть минимум 8 символов, без кириллицы');\r\n      e.target.classList.add('auth__form-error');\r\n      e.target.parentNode.classList.add('auth__form-error');\r\n    } else {\r\n      setPasswordError('');\r\n      e.target.classList.remove('auth__form-error');\r\n      e.target.parentNode.classList.remove('auth__form-error');\r\n    }\r\n  }\r\n\r\n  const signIn = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (isFormValid) {\r\n      dispatch(setFormVerification());\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='container'  >\r\n      <div className='auth'>\r\n        <div className='auth__heading'>Simple Flight Check</div>\r\n        <form className='auth__form'>\r\n          <div className='auth__form-item'>\r\n            <label className='auth__form-label' htmlFor='email_input'>Логин:</label>            \r\n\r\n            <input className='auth__form-input' type='email' name='email' id='email_input' onChange={(e) => emailHandler(e)} value={email} />\r\n\r\n            { emailError && <div className='auth__form-error-message auth__form-error-message_email'>{emailError}</div> }\r\n              \r\n          </div>\r\n\r\n          <div className='auth__form-item'>\r\n            <label className='auth__form-label' htmlFor='password_input'>Пароль:</label>            \r\n\r\n            <input className='auth__form-input' type='password' name='password' id='password_input' onChange={(e) => passwordHandler(e)} value={password} />\r\n\r\n            { passwordError && <div className='auth__form-error-message auth__form-error-message_password'>{passwordError}</div> }\r\n          </div>\r\n\r\n          <button className='auth__form-button' type='submit' disabled={!isFormValid} onClick={signIn}>Войти</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { IS_FORM_VALID, LOG_OUT } from './constants';\r\n\r\nexport const setFormVerification = () => ({\r\n  type: IS_FORM_VALID\r\n})\r\n \r\nexport const logOut = () => {\r\n  localStorage.removeItem('auth-verification');\r\n  return ({\r\n    type: LOG_OUT\r\n  })\r\n}","import React from 'react';\r\n\r\nimport './FlightsLogout.css';\r\n\r\nexport const FlightsLogout = ({ onClick }) => {  \r\n\r\n  return (\r\n    <div className='flights__logout' onClick={onClick}>\r\n      <div>Выйти</div>\r\n      <div className='flights__logout_logo' ></div>\r\n    </div>\r\n  )\r\n}","export const FETCH_FLIGHTS = 'FETCH_FLIGHTS';\r\nexport const FETCH_FLIGHTS_SUCCESS = 'FETCH_FLIGHTS_SUCCESS';\r\nexport const GET_CAROUSEL_IMAGES = 'GET_CAROUSEL_IMAGES';\r\nexport const SET_FAVORITES_COUNT = 'SET_FAVORITES_COUNT'","import { \r\n  FETCH_FLIGHTS,\r\n  GET_CAROUSEL_IMAGES,\r\n  SET_FAVORITES_COUNT\r\n} from './constants';\r\n\r\nexport const fetchFlights = (currentDay) => ({\r\n  type: FETCH_FLIGHTS,\r\n  currentDay\r\n});\r\n\r\nexport const getCarouselImages = () => ({\r\n  type: GET_CAROUSEL_IMAGES\r\n});\r\n\r\nexport const setFavorites = (id) => ({\r\n  type: SET_FAVORITES_COUNT,\r\n  id\r\n})","import React from 'react';\r\n\r\nimport './FlightsHeader.css';\r\n\r\nconst today = new Date().toISOString().substring(0, 10);\r\n\r\nexport const FlightsHeader = ({ localeDate, currentDay, onChange }) => {\r\n  return <div className='flights__card-header'>\r\n        \r\n    <div className='flights__card-heading'>\r\n      <span className='flights__card-heading-name'>Вылеты</span>\r\n      <div className='flights__card-heading-arrow' ></div>\r\n      <span className='flights__card-heading-way'>SVO - JFK</span>\r\n    </div>\r\n\r\n    <div className='flights__card-date'> \r\n      <span>{localeDate}</span>\r\n      <div className='flights__calendar' ></div>\r\n\r\n      <form className='flights__form'>            \r\n        <input type='date' name='calendar' value={currentDay} min={today} onChange={(e) => onChange(e)}  />\r\n      </form>\r\n    </div> \r\n  </div>\r\n}","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Slider from 'react-slick';\r\nimport 'slick-carousel/slick/slick.css'; \r\nimport 'slick-carousel/slick/slick-theme.css';\r\n\r\nimport './FlightsCarousel.css';\r\n\r\nconst carouselSettings = {\r\n  className: 'center',\r\n  infinite: false,\r\n  slidesToShow: 3.5,\r\n  speed: 500,\r\n  arrows: false,\r\n};\r\n\r\nexport const FlightsCarousel = () => {\r\n\r\n  const carouselImages = useSelector(state => state.flights.images);\r\n\r\n  const slider = React.useRef(null); \r\n\r\n  return (\r\n    <div className='flights__pics'>\r\n      <Slider ref={slider} {...carouselSettings}>\r\n        {carouselImages.map(item => <img src={item.default} alt='img' /> )}            \r\n      </Slider>\r\n      <button className='flights__pics_prev-arrow' onClick={() => slider?.current?.slickPrev()}></button>\r\n      <button className='flights__pics_next-arrow' onClick={() => slider?.current?.slickNext()}></button>\r\n    </div>\r\n)}","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { setFavorites } from '../../store/flights/action';\r\n\r\nimport './FlightsInfo.css';\r\n\r\nexport const FlightsInfo = () => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const flightsData = useSelector(state => state.flights.flightsData);\r\n\r\n  const favoritesCount = flightsData.filter((flight) => flight.isFavorite).length;\r\n\r\n  const favoritesClickHandle = (id) => {\r\n    dispatch(setFavorites(id));\r\n  }\r\n\r\n  return(\r\n    <div className='flights__info'>\r\n\r\n      <div className='flights__info-favorites'>Добавлено в Избранное: <span className='flights__info-favorites-count'>{favoritesCount}</span> рейсов</div>\r\n\r\n      <div className='flights__info-items'>\r\n\r\n        {flightsData[0]?.price ? flightsData.map((flight) => {\r\n          return (\r\n              <div className='flights__info-item'>\r\n                <div className='flights__info-item-plane' ></div>\r\n\r\n                <div className='flights__info-item-data'>\r\n\r\n                  <div className='flights__info-item-destination'>\r\n                    <span>{flight.from}</span>\r\n                    <div className='flights__info-item-small-arrow' ></div>\r\n                    <span>{flight.to}</span>\r\n                  </div>\r\n\r\n                  <div className='flights__info-item-date'>\r\n                    <div>{flight.date}</div>\r\n                    <div className='flights__info-item-date-dash' ></div>\r\n                    <div>20:20</div>\r\n                  </div>\r\n                  <div>{flight.airport}</div>\r\n                </div>\r\n\r\n                <div className='flights__info-item-price'>\r\n                  <div className={`flights__info-item-price-heart ${flight.isFavorite ? 'flights__info-item-price-heart_active' : 'flights__info-item-price-heart_disable' }`} onClick={() => favoritesClickHandle(flight.id)} ></div>\r\n                  <div>\r\n                    <span className='flights__info-item-price-name'>Price: </span>\r\n                    <span className='flights__info-item-price-number'>{`${flight.price} ${flight.currency}`}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n          )}) \r\n          : <div className='flights__info-error'>В выбранный Вами день информация о рейсах не найдена.</div>\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { fetchFlights } from '../../store/flights/action';\r\n\r\nimport { FlightsHeader } from '../FlightsHeader/FlightsHeader';\r\nimport { FlightsCarousel } from '../FlightsCarousel/FlightsCarousel';\r\nimport { FlightsInfo } from '../FlightsInfo/FlightsInfo';\r\n\r\nimport './FlightsCard.css';\r\n\r\nconst dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };\r\n\r\nexport const FlightsCard = () => {\r\n\r\n  const [currentDay, setCurrentDay] = useState(new Date().toISOString().substring(0, 10));\r\n  const [localeDate, setLocaleDate] = useState('');    \r\n\r\n  const dispatch = useDispatch();  \r\n\r\n  useEffect(() => {\r\n   \r\n    const localeCurrentDay = new Date(currentDay).toLocaleDateString('ru-RU', dateOptions);\r\n\r\n    setLocaleDate(localeCurrentDay.substring(0, localeCurrentDay.length - 3));\r\n\r\n    dispatch(fetchFlights(currentDay));\r\n  }, []);\r\n\r\n  const switchCurrentDay = (e) => {\r\n    setCurrentDay(e.target.value);\r\n\r\n    const localeCurrentDay = new Date(e.target.value).toLocaleDateString('ru-RU', dateOptions);\r\n\r\n    setLocaleDate(localeCurrentDay.substring(0, localeCurrentDay.length - 3));\r\n    \r\n    dispatch(fetchFlights(e.target.value)); \r\n  }\r\n\r\n  return (\r\n    <div className='flights__card'>\r\n      \r\n      <FlightsHeader \r\n        localeDate={localeDate}\r\n        currentDay={currentDay}  \r\n        onChange={switchCurrentDay} />            \r\n\r\n      <FlightsCarousel />\r\n\r\n      <FlightsInfo />\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { logOut } from '../../store/auth/action';\r\n\r\nimport './FlightsPage.css';\r\n\r\nimport { FlightsLogout } from '../FlightsLogout/FlightsLogout';\r\nimport { FlightsCard } from '../FlightsCard/FlightsCard';\r\n\r\nexport const FlightsPage = () => { \r\n\r\n  const dispatch = useDispatch();  \r\n\r\n  const logout = () => dispatch(logOut());  \r\n\r\n  return (\r\n    <div className='flights__container'>\r\n\r\n      <FlightsLogout onClick={logout} />\r\n\r\n      <FlightsCard />\r\n      \r\n    </div>\r\n  )\r\n}","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport { AuthPage } from './components/AuthPage/AuthPage';\nimport { FlightsPage } from './components/FlightsPage/FlightsPage';\n\nimport './App.css';\n\nexport const PrivateRoute = ({ component: Component, ...rest }) => {\n  const isFormValid = useSelector(state => state.auth.isFormValid);\n\n  return (\n    <Route\n      {...rest}\n      component={(props) => (\n        isFormValid ? (\n          <Component {...props} />\n        ) : (\n          <Redirect to=\"/\" />\n        )\n      )}\n    />\n  );\n};\n\nconst PublicRoute = ({ component: Component, restricted, ...rest }) => {\n  const isFormValid = useSelector(state => state.auth.isFormValid);\n  \n  return (\n    <Route\n      {...rest}\n      component={(props) => (\n        isFormValid ? (\n          <Redirect to=\"flights\"/>\n        ) : (\n          <Component {...props} />\n        )\n      )}\n    />\n  );\n};\n\nconst App = () => {\n\n  return (\n    <Switch>\n      <PrivateRoute path='/flights' component={FlightsPage} />\n      <PublicRoute exact path='/' component={AuthPage} />      \n    </Switch>\n  );\n}\n\nexport default App;","import { createBrowserHistory } from 'history';\r\n\r\nexport default createBrowserHistory({});","import history from '../../utils/history';\r\nimport { takeEvery } from 'redux-saga/effects';\r\nimport { IS_FORM_VALID } from './constants';\r\n\r\nfunction* login() {\r\n  try {   \r\n    yield localStorage.setItem('auth-verification', true);\r\n    \r\n    yield history.push('/flights');\r\n  } catch (e) {\r\n     console.log(e);\r\n  }\r\n}\r\n\r\nexport const authSagas = [\r\n  takeEvery(IS_FORM_VALID, login)\r\n]","import { call, put, takeEvery } from 'redux-saga/effects';\r\nimport axios from 'axios';\r\nimport { nanoid } from 'nanoid';\r\n\r\nimport { \r\n  FETCH_FLIGHTS,\r\n  FETCH_FLIGHTS_SUCCESS\r\n} from './constants';\r\n\r\nconst fillArray = (value, count) => {\r\n  const result = [];\r\n\r\n  for (let i = 0; i < count; i++){\r\n    result.push(value)\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nfunction* fetchFlightsSaga(action) {\r\n  const getFlights = () => {\r\n   return axios({\r\n      method: 'GET',\r\n      url: `https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/browseroutes/v1.0/RU/RUB/en-EN/SVO-sky/JFK-sky/${action.currentDay}`,\r\n      params: {inboundpartialdate: 'anytime'},\r\n      headers: {\r\n        'x-rapidapi-key': '9e7c53efa2mshde99a7dd7531a43p152bbcjsn3c792405c63d',\r\n        'x-rapidapi-host': 'skyscanner-skyscanner-flight-search-v1.p.rapidapi.com'\r\n      }\r\n    })\r\n  }\r\n\r\n  try {\r\n    const response = yield call(getFlights);\r\n    const data = response.data;\r\n\r\n    const newData = {\r\n      price: data.Quotes[0]?.MinPrice,\r\n      currency: data.Currencies[0]?.Symbol,\r\n      from: `${data.Places[1]?.CityName} (${data.Places[1]?.IataCode})`,\r\n      to: `${data.Places[0]?.CityName} (${data.Places[0]?.IataCode})`,\r\n      date: action.currentDay,\r\n      airport: data.Carriers[0]?.Name,\r\n    };\r\n\r\n    const listFlights = fillArray(newData, 28).map(flights => {\r\n      return {\r\n        ...flights,\r\n        isFavorite: false,\r\n        id: nanoid(),\r\n      }\r\n    });\r\n\r\n    yield put({ type: FETCH_FLIGHTS_SUCCESS, listFlights })\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n}\r\n\r\nexport const flightsSagas = [\r\n  takeEvery(FETCH_FLIGHTS, fetchFlightsSaga)\r\n]","import { all } from 'redux-saga/effects';\r\nimport { authSagas } from './auth/authSaga';\r\nimport { flightsSagas } from './flights/flightsSaga';\r\n\r\nexport default function* rootSaga() {\r\n  yield all([\r\n    ...authSagas,\r\n    ...flightsSagas\r\n  ])\r\n}","const defaultStrategy = state => state;\r\n\r\nfunction createReducer(strategyMap, initialState) {\r\n  return (state = initialState, action) => (strategyMap[action.type] !== undefined\r\n    ? strategyMap[action.type](state, action)\r\n    : defaultStrategy(state, action));\r\n}\r\n\r\nexport default createReducer;","import createReducer from \"../../utils/createReducer\";\r\nimport {\r\n  IS_FORM_VALID,\r\n  LOG_OUT\r\n} from \"./constants\";\r\n\r\nconst initialState = {\r\n  isFormValid: Boolean(localStorage.getItem('auth-verification')) || false,\r\n};\r\n\r\nconst setFormVerification = (state) => ({\r\n  ...state,\r\n  isFormValid: true\r\n});\r\n\r\nconst logOut = (state) => ({\r\n  ...state,\r\n  isFormValid: false\r\n})\r\n\r\nconst strategyMap = {\r\n  [IS_FORM_VALID]: setFormVerification,\r\n  [LOG_OUT]: logOut,\r\n};\r\n\r\nconst authReducer = createReducer(strategyMap, initialState);\r\n\r\nexport default authReducer;","import createReducer from \"../../utils/createReducer\";\r\nimport {\r\n  FETCH_FLIGHTS_SUCCESS,\r\n  GET_CAROUSEL_IMAGES,\r\n  SET_FAVORITES_COUNT\r\n} from \"./constants\";\r\n\r\nconst ny1 = require('../../images/ny1.jpg');\r\nconst ny2 = require('../../images/ny2.jpg');\r\nconst ny3 = require('../../images/ny3.jpg');\r\n\r\nconst initialState = {\r\n  flightsData: [],\r\n  images: [ny1, ny2, ny3, ny1, ny2, ny3],\r\n  \r\n};\r\n\r\nconst fetchFlights = (state, flights) => {\r\n  return ({\r\n  ...state,\r\n  flightsData: flights.listFlights\r\n})};\r\n\r\nconst getCarouselImages = (state) => ({\r\n  ...state,\r\n  images: state.images\r\n});\r\n\r\nconst setFavorites = (state, { id }) => ({\r\n  ...state,\r\n  flightsData: state.flightsData.map(flight => {\r\n    if(flight.id === id){\r\n      return {\r\n        ...flight,\r\n        isFavorite: flight.isFavorite ? false : true\r\n      }\r\n    }\r\n    return { ...flight }\r\n  })\r\n})\r\n\r\nconst strategyMap = {\r\n  [FETCH_FLIGHTS_SUCCESS]: fetchFlights,\r\n  [GET_CAROUSEL_IMAGES]: getCarouselImages,\r\n  [SET_FAVORITES_COUNT]: setFavorites,\r\n};\r\n\r\nconst flightsReducer = createReducer(strategyMap, initialState);\r\n\r\nexport default flightsReducer;","import { combineReducers } from 'redux';\r\nimport authReducer from './auth/reducer';\r\nimport flightsReducer from './flights/reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  flights: flightsReducer,\r\n });\r\n\r\nexport default rootReducer;","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport rootSaga from './rootSaga';\r\nimport rootReducer from './rootReducer';\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst configureStore = () => {\r\n  \r\n  return {\r\n      ...createStore(rootReducer, composeWithDevTools(applyMiddleware(sagaMiddleware))),\r\n  };\r\n};\r\n\r\nconst store = configureStore();\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport { Router } from 'react-router-dom';\nimport store from './store/store';\nimport history from './utils/history';\n\nReactDOM.render(\n  <Router history={ history } basename={process.env.PUBLIC_URL} >\n    <Provider store={ store }>\n      <App />\n    </Provider>    \n  </Router>,\n  document.getElementById('root')\n);"],"sourceRoot":""}